<fieldset class="layui-elem-field layui-field-title"
	style="margin-top: 20px;">
	<legend>配置规则</legend>
</fieldset>

<form class="layui-form">
	<div class="layui-form-item">
		<label class="layui-form-label">选择框</label>
		<div class="layui-input-inline">
			<select name=configId lay-verify="required">
				<option value=""></option>
				<option value="1">小说列表页</option>
				<option value="2">小说页</option>
				<option value="3">小说名称</option>
				<option value="4">小说作者</option>
				<option value="5">小说类型</option>
				<option value="6">小说描述</option>
				<option value="7">小说主图地址</option>
				<option value="8">小说章节标签</option>
				<option value="9">小说章节地址</option>
				<option value="10">小说章节名称</option>
			</select>
		</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">样式选择</label>
		<div class="layui-input-inline">
			<input name="select" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">规则请查看jsoup文档(例如：a标签就写a)</div>
	</div>

	<div class="layui-form-item">
		<label class="layui-form-label">标签数量</label>
		<div class="layui-input-inline">
			<input name="num" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">输入number或者all</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">属性选择</label>
		<div class="layui-input-inline">
			<input name="attrName" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">html为选择内容，其他属性直接写属性名称，例如:src</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">正则表达式</label>
		<div class="layui-input-inline">
			<input name="reg" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">为属性的值进行正则得到想要的结果，无正则输入：[\s\S]*</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">正则组号</label>
		<div class="layui-input-inline">
			<input name="regGroupNum" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">正则里面()的位置</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">正则结果补充</label>
		<div class="layui-input-inline">
			<input name="appendResult" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">正则不能满足添加，在此处添加，一般添加:https://</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-input-block">
			<button type="reset" class="layui-btn layui-btn-primary">重置</button>
			<button class="layui-btn" lay-submit lay-filter="mustSubmit">立即提交</button>
		</div>
	</div>
</form>

<fieldset class="layui-elem-field layui-field-title"
	style="margin-top: 20px;">
	<legend>正则测试</legend>
</fieldset>
<form class="layui-form">
	<div class="layui-form-item">
		<label class="layui-form-label">文本内容</label>
		<div class="layui-input-inline">
			<input name="text" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">输入需要验证的文本内容</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">正则表达式</label>
		<div class="layui-input-inline">
			<input name="reg" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">无正则输入：[\s\S]*</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">正则组号</label>
		<div class="layui-input-inline">
			<input name="regGroupNum" lay-verify="required" placeholder="请输入"
				autocomplete="off" class="layui-input" type="text">
		</div>
		<div class="layui-form-mid layui-word-aux">正则里面()的位置</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">验证结果</label>
		<div class="layui-input-inline">
			<div id="validResult" class="layui-form-mid layui-word-aux"></div>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-input-block">
			<button class="layui-btn" lay-submit lay-filter="*">验证</button>
		</div>
	</div>
</form>
<script>
	var $ = layui.jquery;
    var form = layui.form;
	var layer= layui.layer;
	//Demo
	layui.use('form', function() {
		form.on('submit(*)', function(data) {
			console.log(window.location.href)
			console.log(data.field);
			$.ajax({
				type : 'post',
				url : '../validReg',
				data : data.field,
				success : function(result) {
					$("#validResult").html(result);
				},
				error : function(xml) {
					layer.close(index);
					top.winui.window.msg("获取页面失败", {
						icon : 2,
						time : 2000
					});
					console.log(xml.responseText);
				}
			});
			return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
		});
		form.render();
	});

	//get url param
	function getQueryString(name) {
		var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
		var url = decodeURI(decodeURI(window.location.search))
		var r = url.substr(1).match(reg);
		if (r != null)
			return unescape(r[2]);
		return null;
	}
</script>